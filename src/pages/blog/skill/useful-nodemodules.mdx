---
title: å®ç”¨çš„ node ä¾èµ–åŒ…
description: å®ç”¨çš„ node ä¾èµ–åŒ…
date: 2022-11-13 17:20:00
---
import Alert from '@/components/post/alert.astro'

[[toc]]

## è‡ªå·±é€ çš„ä¸€äº›å¸¸ç”¨çš„è½®å­

### `@bluesyoung/rpc`

ğŸŒŸ åŸºäº `postMessage` + `MessageChannel`

ğŸŒŸ å¯ç”¨äº `window.open` æ‰“å¼€çš„é¡µé¢åŠ `iframe` åµŒå¥—çš„å­é¡µé¢ä¸çˆ¶é¡µé¢ä¹‹é—´çš„é€šä¿¡(è¿œç¨‹å‡½æ•°è°ƒç”¨)

ğŸŒŸ æ— è§†è·¨åŸŸé™åˆ¶ï¼Œæ‹¥æœ‰å®‰å…¨é™åˆ¶ï¼Œé˜»éš”æ¶æ„æ¶ˆæ¯

**ğŸŒŸ `100% TypeScript`ï¼Œæ‹¥æœ‰è¿‘ä¹å®Œç¾çš„ç±»å‹æç¤º**

ğŸŒŸ `esm` | `cjs` | `umd`ï¼Œå„ç§ç¯å¢ƒä¸€åº”ä¿±å…¨

ğŸŒŸ `IOC` é€šä¿¡ä¸è°ƒç”¨è§£è€¦


### `@bluesyoung/unplugin-json-conf`

ğŸŒŸ åœ¨è¿è¡Œ/æ‰“åŒ…è¿‡ç¨‹ä¸­ï¼ŒåŠ è½½æŒ‡å®šä½ç½®çš„ `JSON` æ–‡ä»¶çš„å†…å®¹ä½œä¸ºè™šæ‹Ÿæ¨¡å—çš„é»˜è®¤å¯¼å‡ºå†…å®¹

### `@bluesyoung/wechat-auth`

ğŸŒŸ å¾®ä¿¡ç½‘é¡µæˆæƒ/ç½‘é¡µåº”ç”¨ç™»å½•ï¼Œè·å–æˆæƒç 

### `@bluesyoung/call-app`

ğŸŒŸ åŸºäº `scheme` çš„æ‰‹æœºæµè§ˆå™¨å”¤ç«¯

### `@bluesyoung/qrcode-with-logo`

ğŸŒŸ ç»˜åˆ¶å¸¦æœ‰ `logo` çš„äºŒç»´ç 

ğŸŒŸ åœ¨ `qrcode-with-logos` ä¸Šè¿›è¡Œäº†éƒ¨åˆ†æ”¹è¿›


## canvas æ“ä½œ

### `fabric`

**`@types/fabric` éœ€è¦ä¾èµ– `canvas` åŒ…ï¼ï¼ï¼**

<Alert type="warning">**`canvas` éœ€è¦ä» `github` æ‹‰å–ï¼Œå¦‚éå¿…è¦ï¼Œä¸å»ºè®®ä½¿ç”¨**</Alert>

```ts
import { fabric } from 'fabric';

// éœ€è¦ä¸äº¤äº’çš„ canvas æ—¶ä½¿ç”¨ï¼Œæœ‰äº¤äº’éœ€æ±‚ç›´æ¥å®ä¾‹åŒ– fabric.Canvas
const canvas = new fabric.StaticCanvas('poster', {
  width,
  height
});

// é¡¶éƒ¨é»‘è‰²èƒŒæ™¯
const top = new fabric.Rect({
  left: 0,
  top: 0,
  fill: 'black',
  width,
  height: topHeight
});
canvas.add(top);

// å›¾å½¢ç»˜åˆ¶
const icon = new Image();
// å¦‚æœå›¾ç‰‡è·¨åŸŸï¼Œåˆ™éœ€è¦ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸å¯¼å‡º
// å¦‚æœå…ˆå‰ä½¿ç”¨ img æ ‡ç­¾è·å–è¿‡è¯¥å›¾ç‰‡ï¼Œåˆ™ img æ ‡ç­¾ä¹Ÿå¿…é¡»å¸¦æœ‰ anonymous å±æ€§ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¬¬äºŒæ¬¡è·å–ä¸åˆ°ï¼ï¼ï¼
icon.crossOrigin = 'anonymous';
icon.referrerPolicy = 'no-referrer';

icon.src = 'å›¾ç‰‡åœ°å€';
icon.onload = () => {
  const oImg = new fabric.Image(icon);
  // å°†å›¾ç‰‡ç¼©æ”¾åˆ°æŒ‡å®šçš„å®½é«˜
  oImg.scaleToHeight(iconWidth);
  oImg.scaleToWidth(iconWidth);

  oImg.left = width / 5 * 2;
  oImg.top = (topHeight - iconWidth) / 2;

  canvas.add(oImg);
};

```