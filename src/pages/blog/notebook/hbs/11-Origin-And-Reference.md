---
title: 11-原始值与引用值
image: /img/hbs.png
description: JavaScript 的原始值与引用值
date: 2020-12-28 17:23:45
---
<!-- 自动目录 -->
[[toc]]

## 原始值

简单类型的数据，赋值时直接**复制**值

## 引用值

复杂数据类型(由多个值构成的对象)

赋值时**引用赋值，共享同一内存**

## 动态属性

原始值不能拥有属性

**给原始值添加属性不会报错，但是后面也不能获取到该属性**

原始类型的初始化只能使用字面量，如果使用 `new` 关键字则会创建 `Object` 类型的实例(**拥有动态属性**，引用赋值，**挂载动态属性会影响原始对象**)

**引用值可以随时添加、修改和删除其属性和方法**

## 复制值

除了存储方式不同，原始值和引用值在通过变量复制时也有所不同

在通过变量把一个原始值赋值 到另一个变量时，原始值会被复制到新变量的位置

这两个变量可以独立使用，互不干扰

把引用值从一个变量赋给另一个变量时，存储在变量中的值也会被复制到新变量所在的位置

区别在于，这里**复制的值实际上是一个指针**，它指向存储在堆内存中的对象

操作完成后，**两个变量实际上指向同一个对象，因此一个对象上面的变化会在另一个对象上反映出来**

## 传递参数

变量作为函数参数被传递时，相当于使用 `=` 直接赋值

**原始值复制赋值，引用值引用赋值**

## 确定类型

`typeof` 只能检测简单类型的数据

`instanceof` **通过引用值的原型链判断类型**

所有引用值都是 `Object` 的实例，因此通过 `instanceof` 操作符检测任何引用值和 `Object` 构造函数都会返回 `true`

如果用 `instanceof` 检测原始值，则始终会返回 `false`， 因为原始值不是对象

`typeof` 操作符在用于检测函数时也会返回`"function"`


`ECMA-262` 规定，**任何实现内部 `[[Call]]` 方法的对象都应该在 `typeof` 检测时返回 `"function"`**。因为上述浏览器中的正则表达式实现了这个方法，所 以 `typeof`对正则表达式也返回`"function"`

*当在 `Safari`（直到 `Safari 5`） 和 `Chrome`（直到 `Chrome7`）中用于检测正则表达式时，由于实现细节的原因，`typeof` 也会返回 `"function"`*

*在 `IE` 和 `Firefox` 中，`typeof` 对正则表达式 返回 `"object"`*